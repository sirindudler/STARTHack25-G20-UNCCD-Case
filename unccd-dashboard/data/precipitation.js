// Raw precipitation data from the CSV
  export const precipitationData = [
    { year: 2010, feature: 0, mean: 141.40884, std: 33.88568 },
    { year: 2010, feature: 1, mean: 424.94662, std: 29.337643 },
    { year: 2010, feature: 2, mean: 411.3583, std: 54.53192 },
    { year: 2010, feature: 3, mean: 390.18692, std: 43.102715 },
    { year: 2010, feature: 4, mean: 345.3449, std: 76.62251 },
    { year: 2011, feature: 0, mean: 63.387566, std: 13.505282 },
    { year: 2011, feature: 1, mean: 284.89865, std: 33.016678 },
    { year: 2011, feature: 2, mean: 187.40579, std: 37.111362 },
    { year: 2011, feature: 3, mean: 182.73125, std: 30.165611 },
    { year: 2011, feature: 4, mean: 188.88228, std: 45.12693 },
    { year: 2012, feature: 0, mean: 97.10061, std: 29.317152 },
    { year: 2012, feature: 1, mean: 503.27002, std: 43.714466 },
    { year: 2012, feature: 2, mean: 347.0691, std: 46.95946 },
    { year: 2012, feature: 3, mean: 336.8317, std: 39.718555 },
    { year: 2012, feature: 4, mean: 320.73938, std: 84.34201 },
    { year: 2013, feature: 0, mean: 83.477104, std: 21.707628 },
    { year: 2013, feature: 1, mean: 367.66833, std: 37.47414 },
    { year: 2013, feature: 2, mean: 246.49467, std: 38.794167 },
    { year: 2013, feature: 3, mean: 242.6511, std: 28.10459 },
    { year: 2013, feature: 4, mean: 246.88039, std: 62.956543 },
    { year: 2014, feature: 0, mean: 59.293926, std: 16.32382 },
    { year: 2014, feature: 1, mean: 355.32562, std: 39.458103 },
    { year: 2014, feature: 2, mean: 221.17365, std: 52.459785 },
    { year: 2014, feature: 3, mean: 201.26183, std: 30.690683 },
    { year: 2014, feature: 4, mean: 215.57281, std: 66.036385 },
    { year: 2015, feature: 0, mean: 79.36138, std: 22.679724 },
    { year: 2015, feature: 1, mean: 371.19336, std: 35.996758 },
    { year: 2015, feature: 2, mean: 202.93274, std: 39.651875 },
    { year: 2015, feature: 3, mean: 203.05682, std: 25.896189 },
    { year: 2015, feature: 4, mean: 230.59196, std: 54.072628 },
    { year: 2016, feature: 0, mean: 91.48764, std: 27.640648 },
    { year: 2016, feature: 1, mean: 424.55084, std: 47.88551 },
    { year: 2016, feature: 2, mean: 255.68367, std: 47.706318 },
    { year: 2016, feature: 3, mean: 268.78644, std: 34.752052 },
    { year: 2016, feature: 4, mean: 287.3975, std: 66.96966 },
    { year: 2017, feature: 0, mean: 69.68437, std: 11.604135 },
    { year: 2017, feature: 1, mean: 332.41388, std: 26.024097 },
    { year: 2017, feature: 2, mean: 200.16551, std: 43.770054 },
    { year: 2017, feature: 3, mean: 208.81546, std: 37.003937 },
    { year: 2017, feature: 4, mean: 211.60039, std: 61.164787 },
    { year: 2018, feature: 0, mean: 78.63274, std: 21.80756 },
    { year: 2018, feature: 1, mean: 391.11655, std: 50.10065 },
    { year: 2018, feature: 2, mean: 224.6726, std: 35.042286 },
    { year: 2018, feature: 3, mean: 222.90836, std: 20.99028 },
    { year: 2018, feature: 4, mean: 231.04248, std: 60.03273 },
    { year: 2019, feature: 0, mean: 52.464844, std: 13.745661 },
    { year: 2019, feature: 1, mean: 296.37738, std: 49.894573 },
    { year: 2019, feature: 2, mean: 157.58409, std: 32.076527 },
    { year: 2019, feature: 3, mean: 159.851, std: 24.088215 },
    { year: 2019, feature: 4, mean: 165.41852, std: 45.17934 },
    { year: 2020, feature: 0, mean: 81.67166, std: 24.658455 },
    { year: 2020, feature: 1, mean: 541.63983, std: 55.465363 },
    { year: 2020, feature: 2, mean: 312.7552, std: 71.58652 },
    { year: 2020, feature: 3, mean: 284.38168, std: 47.79157 },
    { year: 2020, feature: 4, mean: 331.81036, std: 100.45988 },
    { year: 2021, feature: 0, mean: 63.744755, std: 16.999496 },
    { year: 2021, feature: 1, mean: 324.30203, std: 34.46028 },
    { year: 2021, feature: 2, mean: 237.27635, std: 37.526928 },
    { year: 2021, feature: 3, mean: 207.60844, std: 34.964558 },
    { year: 2021, feature: 4, mean: 202.32378, std: 57.43249 },
    { year: 2022, feature: 0, mean: 89.22108, std: 20.993336 },
    { year: 2022, feature: 1, mean: 506.49216, std: 30.61227 },
    { year: 2022, feature: 2, mean: 240.99869, std: 54.63834 },
    { year: 2022, feature: 3, mean: 232.93425, std: 22.28541 },
    { year: 2022, feature: 4, mean: 293.7181, std: 92.06574 },
    { year: 2023, feature: 0, mean: 79.33613, std: 19.290197 },
    { year: 2023, feature: 1, mean: 372.53757, std: 46.620094 },
    { year: 2023, feature: 2, mean: 221.73122, std: 37.261475 },
    { year: 2023, feature: 3, mean: 213.7821, std: 23.861023 },
    { year: 2023, feature: 4, mean: 228.85042, std: 59.655636 }
  ];
  
  /**
   * Get precipitation data for a specific region
   * @param {string} regionCode - The region code from the UI
   * @returns {Array} - Array of precipitation data for the selected region
   */
  export const getPrecipitationDataForRegion = (regionCode) => {
    const featureId = regionToFeatureMap[regionCode];
    
    if (featureId === undefined) {
      console.warn(`No feature ID mapping found for region: ${regionCode}, using default region`);
      return precipitationData.filter(item => item.feature === 0);
    }
    
    return precipitationData.filter(item => item.feature === featureId);
  };
  
  /**
   * Calculate the average precipitation for a region
   * @param {string} regionCode - The region code from the UI
   * @returns {number} - Average precipitation
   */
  export const getAveragePrecipitation = (regionCode) => {
    const regionData = getPrecipitationDataForRegion(regionCode);
    const sum = regionData.reduce((total, item) => total + item.mean, 0);
    return (sum / regionData.length).toFixed(2);
  };
  
  /**
   * Calculate year-over-year trend
   * @param {string} regionCode - The region code from the UI
   * @returns {string} - Trend direction and percentage
   */
  export const getPrecipitationTrend = (regionCode) => {
    const regionData = getPrecipitationDataForRegion(regionCode);
    
    // Sort by year
    const sortedData = [...regionData].sort((a, b) => a.year - b.year);
    
    // Need at least 2 years of data to calculate trend
    if (sortedData.length < 2) return "N/A";
    
    // Look at last two years
    const lastYearData = sortedData[sortedData.length - 1];
    const prevYearData = sortedData[sortedData.length - 2];
    
    const percentChange = ((lastYearData.mean - prevYearData.mean) / prevYearData.mean * 100).toFixed(1);
    
    return {
      direction: percentChange >= 0 ? "up" : "down",
      percentage: Math.abs(percentChange)
    };
  };
  
  /**
   * Get formatted data for the rainfall chart
   * @param {string} regionCode - The region code from the UI
   * @returns {Array} - Data formatted for the chart
   */
  export const getChartData = (regionCode) => {
    const regionData = getPrecipitationDataForRegion(regionCode);
    
    // Sort by year
    return [...regionData].sort((a, b) => a.year - b.year);
  };